(function(){window.SimplePanorama=function(){function a(b){var c,d,e;if(this.maxPos={x:0,y:0},this.size={x:0,y:0},this.elem=null,this.img=null,this.subElem=null,this.pos={x:0,y:0},this.targetSpeed={x:0,y:0},this.speed={x:0,y:0},this.hsCounter=0,this.isRepeative=null,this.moduleData={},this.hotspots={},this.offset=0,this.speedOverride={x:!1,y:!1},e=b.elem,!e&&b.selector&&(e=$(b.selector)),!e.length)throw'No DOM element supplied for panorama, use "elem" or "selector."';if(this.elem=$('<div class="sp-container"></div>'),c=b.imagePath,!c)throw'No image path supplied for panorama, use "imagePath".';b.initialPos&&(this.pos.x=e.innerWidth()/2-b.initialPos),this.isRepeative=void 0===b.repeative?!0:b.repeative,this.img=new Image,d=this,this.img.onload=function(){var f,g,h,i,j;for(d.elem.css("height",this.height+"px"),g="<div>",h=d.isRepeative?2:0,f=i=0;h>=0?h>=i:i>=h;f=h>=0?++i:--i)g+='<img class="sp-image sp-number_'+f+'" src="'+c+'" alt"Panorama" />';return d.elem.html(g+"</div>"),d.subElem=$(d.elem.children()[0]),d.offset=d.isRepeative?this.width:0,d.subElem.css({width:this.width*(h+1)+"px",left:"-"+d.offset+"px"}),d.lastTick=(new Date).getTime(),d.updateSpeedTicks=0,window.setInterval(function(){return d.updatePano()},1),b.modules&&$.each(b.modules,function(b,c){return d.moduleData[c]={},a.modules[c](d,d.moduleData[c])}),e.html(d.elem),$(window).trigger("resize"),null!=(j=b.callback)&&j.call(d),$(d).trigger("loaded")},$(window).resize(function(){return d.size.x=d.img.width<d.elem.width()?d.img.width:d.elem.parent().innerWidth(),d.size.y=d.img.height<d.elem.height()?d.img.height:d.elem.parent().innerHeight(),d.elem.css("width",d.width+"px"),d.maxPos.x=d.isRepeative?d.img.width:d.img.width-d.size.x,d.maxPos.y=d.img.height-d.size.y}),this.img.src=c}return a.modules={},a.use3DTransform=Modernizr.csstransforms3d&&(navigator.userAgent.indexOf("Safari")<0||navigator.userAgent.indexOf("Chrome")>-1),a.prototype.updateSpeed=function(){return this.speedOverride.x?(this.speed.x=this.speedOverride.x,this.speedOverride.x=!1):this.speed.x=(1.8*this.speed.x+.2*this.targetSpeed.x)/2,this.speedOverride.y?(this.speed.y=this.speedOverride.y,this.speedOverride.y=!1):this.speed.y=(1.8*this.speed.y+.2*this.targetSpeed.y)/2},a.prototype.setSpeedX=function(a){return this.speedOverride.x=a},a.prototype.setSpeedY=function(a){return this.speedOverride.y=a},a.prototype.doTargetSpeed=function(a,b){return null==b&&(b=0),this.targetSpeed.x=a,this.targetSpeed.y=b},a.prototype.boundCoordinate=function(a,b){return a>0?0:-b>a?-b:a},a.prototype.updatePano=function(){var b,c,d,e,f;return e=(new Date).getTime(),d=e-this.lastTick,this.lastTick=e,this.updateSpeedTicks+=d,this.updateSpeedTicks>50&&(this.updateSpeed(),this.updateSpeedTicks=0),null!==this.subElem?(b=this.pos.x+this.speed.x*d,c=this.pos.y+this.speed.y*d,this.pos.x=this.isRepeative?b%this.maxPos.x:this.boundCoordinate(b,this.maxPos.x),this.pos.y=this.boundCoordinate(c,this.maxPos.y),a.use3DTransform?(f="translate3D("+this.pos.x+"px, "+this.pos.y+"px, 0)",this.subElem.css({"-o-transform":f,"-webkit-transform":f,"-moz-transform":f,"-ms-transform":f,transform:f})):(this.subElem.css("left",this.pos.x-this.offset+"px"),this.subElem.css("top",this.pos.y+"px"))):void 0},a.prototype.createCircleHotspot=function(a,b,c,d,e){var f;return f=this.prepareHotspot(a,"sp-circ",b-d,c-d,2*d,2*d),f.css("border-radius",d+"px"),this.populateTripleBuffer(f,e),this.hsCounter},a.prototype.createRectHotspot=function(a,b,c,d,e,f){var g;return g=this.prepareHotspot(a,"sp-rect",b,c,d,e),this.populateTripleBuffer(g,f),this.hsCounter},a.prototype.prepareHotspot=function(a,b,c,d,e,f){var g;return g=$('<div class="sp-number-'+ ++this.hsCounter+" sp-hotspot "+b+'"><div class="sp-hotspot-content">'+a+"</div></div>"),g.css({left:c+"px",top:d+"px",width:e+"px",height:f+"px"}),g},a.prototype.getRelativePos=function(a,b){var c,d,e;return c=this.elem.offset().left,e=this.elem.offset().top,d=new Object,d.x=Math.floor(a-c+this.img.width-this.pos.x),d.x%=this.img.width,d.y=Math.floor(b-e),d.y<0&&(d.y=0),d},a.prototype.getRotation=function(){return this.getRelativePos(this.elem.offset().left,0).x},a.prototype.populateTripleBuffer=function(a,b){var c,d,e;return this.hotspots[b]||(this.hotspots[b]=[]),this.isRepeative&&(c=a.clone(),d=a.clone(),e=parseInt(a.css("left").slice(0,-2)),c.css("left",e+this.img.width+"px"),d.css("left",e+2*this.img.width+"px"),this.subElem.append(c,d),this.hotspots[b].push(c,d)),this.subElem.append(a),this.hotspots[b].push(a)},a.prototype.showHotspots=function(a,b){var c,d,e,f,g;if(null==b&&(b=!0),this.hotspots[a]){for(f=this.hotspots[a],g=[],d=0,e=f.length;e>d;d++)c=f[d],b?g.push($(c).show()):g.push($(c).hide());return g}},a.prototype.removeHotspots=function(a){var b,c,d,e;if(this.hotspots[a]){for(e=this.hotspots[a],c=0,d=e.length;d>c;c++)b=e[c],$(b).remove();return this.hotspots[a]=[]}},a}()}).call(this),function(){SimplePanorama.modules.move_mousedown=function(a,b){return a.elem.on("mousedown",function(c){return 1===c.which?(b.mouseStart={x:c.pageX,y:c.pageY},a.elem.css("cursor","move"),c.preventDefault()):void 0}),$("*").on("mousemove",function(c){return void 0!==b.mouseStart?a.doTargetSpeed((b.mouseStart.x-c.pageX)/$(window).width()*3,(b.mouseStart.y-c.pageY)/$(window).height()*3):void 0}),$("*").on("mouseup",function(c){return void 0!==b.mouseStart&&1===c.which?(a.doTargetSpeed(0),a.elem.css("cursor","auto"),b.mouseStart=void 0):void 0})}}.call(this),function(){SimplePanorama.modules.move_mousehover=function(){return function(a){return a.elem.on("mousemove",function(b){var c;return a.doTargetSpeed(2-(b.pageX-a.elem.position().left)/a.elem.width()*4),c=a.targetSpeed.x>0?a.targetSpeed.x<1:a.targetSpeed.x>-1,c?a.doTargetSpeed(0):void 0})}}}.call(this),function(){SimplePanorama.modules.move_swipe=function(a,b){return a.elem.on("touchstart",function(c){return b.touchStart={x:c.originalEvent.touches[0].pageX,y:c.originalEvent.touches[0].pageY},a.doTargetSpeed(0,0)}),$("*").on("touchmove",function(c){var d,e;return void 0!==b.touchStart?(e={x:c.originalEvent.changedTouches[0].pageX,y:c.originalEvent.changedTouches[0].pageY},d={x:(e.x-b.touchStart.x)/100,y:(e.y-b.touchStart.y)/100},Math.abs(d.x)>Math.abs(a.speed.x)&&a.setSpeedX(d.x),Math.abs(d.y)>Math.abs(a.speed.y)&&a.setSpeedY(d.y),b.touchStart=e):void 0}),$("*").on("touchend",function(){return void 0!==b.touchStart?b.touchStart=void 0:void 0})}}.call(this),function(){SimplePanorama.modules.move_touch=function(a,b){return a.elem.on("touchstart",function(a){return b.touchStart={x:a.originalEvent.touches[0].pageX,y:a.originalEvent.touches[0].pageY}}),$("*").on("touchmove",function(c){return void 0!==b.touchStart?a.doTargetSpeed((b.touchStart.x-c.originalEvent.touches[0].pageX)/200,(b.touchStart.y-c.originalEvent.touches[0].pageY)/200):void 0}),$("*").on("touchend",function(){return void 0!==b.touchStart?(a.doTargetSpeed(0),b.touchStart=void 0):void 0})}}.call(this),function(){SimplePanorama.modules.show_coordinates=function(a){var b,c,d,e,f,g;return b=$('<div class="scInfoBox"><p></p><p></p><p></p></div>'),d={},c={},f={},e="SCTemp_9012457832451",g=function(){return $(b.children("p")[0]).html("Cursor: "+d.x+" "+d.y+"<br />Rotation: "+a.getRotation()),f.path&&($(b.children("p")[1]).html("Rechteck: "+f.path),f={}),c.path?($(b.children("p")[2]).html("Kreis: "+c.path),c={}):void 0},$(a).on("loaded",function(){return b.insertBefore(a.elem),setInterval(g,1e3/30)}),a.elem.on("mousedown",function(a){switch(a.which){case 3:return f.start=d;case 2:return c.pos=d}}),$("*").on("mouseup",function(a){switch(a.which){case 3:return f.path=f.x+","+f.y+","+(f.x+f.w)+","+(f.y+f.h);case 2:return c.path=c.pos.x+","+c.pos.y+","+c.r}}),$("*").on("contextmenu",function(){return!(f.start||c.pos)}),$("*").on("mousemove",function(b){return d=a.getRelativePos(b.pageX,b.pageY),f.start&&(f.w=Math.abs(d.x-f.start.x),f.h=Math.abs(d.y-f.start.y),f.x=Math.min(d.x,f.start.x),f.y=Math.min(d.y,f.start.y),a.removeHotspots("rect"+e),a.createRectHotspot("",f.x,f.y,f.w,f.h,"rect"+e)),c.pos?(c.r=Math.max(Math.abs(c.pos.x-d.x),Math.abs(c.pos.y-d.y)),a.removeHotspots("circ"+e),a.createCircleHotspot("",c.pos.x,c.pos.y,c.r,"circ"+e)):void 0})}}.call(this);